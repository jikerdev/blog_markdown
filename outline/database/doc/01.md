# 超码、主码、候选码的概念与区分

## 1、什么是码?

码是数据系统中的基本概念。所谓码就是能唯一标识实体（数据库中的实体：对应现实生活中某样事物或者人物）的属性，他是整个实体集的性质，而不是单个实体的性质。它包括超码、候选码、主码。

下面我以学生表为例，给大家分享我对码的理解，比如有一个学生表：`student(id,student_number,name,sex)`，即：ID、学号、姓名、性别，这里的实体是`student`，实体的属性有`id`、`student_number`、`name`、`sex`。

## 2、超码

超码也叫做“超级码”，是一个或多个属性的集合，这些属性可以让我们在一个实体集（所谓的实体集就是student表中多条记录的集合）中唯一地标识一个实体。如果K是一个超码，那么K的任意超集也是超码，也就是说如果K是超码，那么所有包含K的集合也是超码。

> 所谓超集是集合论的术语，A ⊇ B，则 A 集是 B 的超集，也就是说 B 的所有元素 A 里都有，但 A 里的元素 B 就未必有

### 2.1 例子

因为通过id可以找到唯一一个学生，所以`{id}`是一个超码，同理`{id,student_number}`、`{id,student_number,name}`、`{id,student_number,name,sex}`、`{student_number}`、`{student_number,name}`、`{student_number,name,sex}`也是超码.

## 3、候选码

超码包括候选码，虽然超码可以唯一标识一个实体，但是可能大多数超码中含有多余的属性，所以我们需要候选码。若关系中的一个属性或属性组的值能够唯一地标识一个元组，且它的真子集不能唯一的标识一个元组，则称这个属性或属性组做候选码。

> 子集比真子集范围大，子集是包括本身的元素的集合，真子集是除本身的元素的集合

### 3.1 例子

在上例中，只有`{id}`或者`{student_number}`是候选码。如果sex和name可以唯一标识一个学生，则`{name，sex}`也为候选码，但是，sex和name并不能唯一标识一个学生，这与现实生活是违反的，因为现实有同名同姓的人，则`{name，sex}`不能作为候选码。

## 4、主码

一个表的候选码可能有多个，从这些个候选码中选择一个做为主码，至于选择哪一个候选码，这个是无所谓的，只要是从候选码中选的就行。

## 5、总结

所有码都是一个集合。所有可以用来在实体集中标识唯一一个实体的集合，都是超码。如果任意超码的真子集不能包括超码（换句话说就是：它的真子集不能唯一的标识一个元组），则称其为候选码。被数据库设计者选中的，用来在同一实体集中区分不同实体的候选码就是主码，可以是一个属性或者多个属性的集合。

简单的说，超码包括候选码，候选码包括主码。

### 5.1 例子1

使用`id`属性作为主码,`MySQL`表定义代码如下：

```sql
create table student
(
    id int primary key,
    student_number varchar(10),
    name varchar(10),
    sex varchar(4)
)
```

### 5.2 例子2

使用`id`和`student_number`属性集合作为主码,`MySQL`表定义代码如下：

```sql
create table student
(
    id int,
    student_number varchar(10),
    name varchar(10),
    sex varchar(4),
    constraint student_primary primary key(id,student_number)
)
```

当然，在现实开发中，我更喜欢使用一个属性来作为主码。比如我个人网站 “极客开发者”（<https://jkdev.cn>），网站的各种数据集合，大多是用一个 `id` 来作为主码来用于标识唯一的某一条数据。
